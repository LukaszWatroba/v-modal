/**
 * vModal - Simple, flexible and beautiful modal dialogs in AngularJS
 * @version v1.0.0
 * @link http://lukaszwatroba.github.io/v-modal
 * @author Łukasz Wątroba <l@lukaszwatroba.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(e){"use strict";function t(){return{restrict:"AE",transclude:!0,scope:{closeMethod:"&?onclose"},link:function(e,t,o,n,r){function a(e){for(;"V-CLOSE"!==e.tagName;)if(e=e.parentNode,!e)return!1;return!0}r(e.$parent,function(e){t.append(e)}),t.on("click",function(t){var o="V-MODAL"===t.target.tagName;(o||a(t.target))&&e.$apply(function(){e.closeMethod()})})}}}function o(t,o,n,r,a,l,c,i,d){return function(u){function v(e){return p.then(function(t){y||m(t,e)})}function m(a,l){if(y=e.element(a),0===y.length)throw new Error("The template contains no elements; you need to wrap text nodes");if(t.enter(y,g),g.attr("v-modal-open",""),h=n.$new(),l)for(var c in l)h[c]=l[c];var i=r(M,{$scope:h});$&&(h[$]=i),o(y)(h)}function f(){var e=a.defer();return y?t.leave(y).then(function(){h.$destroy(),g.removeAttr("v-modal-open"),y=null,e.resolve()}):e.resolve(),e.promise}function s(){return!!y}if(!(!u.template^!u.templateUrl))throw new Error("Expected modal to have exacly one of either `template` or `templateUrl`");var p,h,M=(u.template,u.controller||e.noop),$=u.controllerAs,g=e.element(u.container||i[0].querySelector(d.containerSelector)),y=null;if(u.template){var w=a.defer();w.resolve(u.template),p=w.promise}else p=l.get(u.templateUrl,{cache:c}).then(function(e){return e.data});return{activate:v,deactivate:f,isActive:s}}}e.module("vModal.config",[]).constant("modalConfig",{containerSelector:"body"}),e.module("vModal.directives",[]),e.module("vModal.services",[]),e.module("vModal",["ngAnimate","vModal.config","vModal.directives","vModal.services"]),e.module("vModal.directives").directive("vModal",t),e.module("vModal.services").factory("vModal",o),o.$inject=["$animate","$compile","$rootScope","$controller","$q","$http","$templateCache","$document","modalConfig"]}(angular);