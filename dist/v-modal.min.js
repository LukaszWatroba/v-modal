/**
 * vModal - Simple, flexible and beautiful modal dialogs in AngularJS
 * @version v0.0.1
 * @link http://lukaszwatroba.github.io/v-modal
 * @author Łukasz Wątroba <l@lukaszwatroba.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(e){"use strict";function o(e){return{restrict:"AE",require:"^vDialog",replace:!0,transclude:!0,template:"<div ng-transclude></div>",compile:function(o){o.addClass(e.classes.dialogBody)}}}function t(e){return{restrict:"AE",require:"^vDialog",replace:!0,transclude:!0,template:"<div ng-transclude></div>",compile:function(o){o.addClass(e.classes.dialogFooter)}}}function l(e){return{restrict:"AE",require:"^vDialog",replace:!0,transclude:!0,template:"<div ng-transclude></div>",compile:function(o){o.addClass(e.classes.dialogHeader)}}}function i(o){return{restrict:"AE",require:"^vModal",replace:!0,transclude:!0,template:'<div><div><button ng-if="modalCtrl.hasClose()" ng-click="modalCtrl.close()"></button><div ng-transclude></div></div></div>',scope:{size:"@?",position:"@?"},controller:function(){},compile:function(t){t.addClass(o.classes.dialog);var l=e.element(t.find("div")[0]),i=t.find("button");return l.addClass(o.classes.dialogContent),i.addClass(o.classes.dialogClose).html("<span>"+o.closeButtonText+"</span>"),function(t,l,i,a){e.isDefined(t.vCenter)||(t.vCenter=e.isDefined(i.vCenter)),t.modalCtrl=a,l.addClass(o.classes.sizes[t.size||"medium"]),l.addClass(o.classes.positions[t.position||"center"])}}}}function a(o){return{restrict:"AE",replace:!0,transclude:!0,template:'<div ng-click="modalCtrl.close($event)" ng-transclude></div>',controller:n,controllerAs:"modalCtrl",scope:{close:"&?"},compile:function(t){return t.addClass(o.classes.modal),function(o,t,l){o.hasClose=e.isDefined(l.close)}}}}function n(o,t){var l=this;l.hasClose=function(){return o.hasClose},l.close=function(l){if(l){var i=e.element(l.target);i.hasClass(t.classes.modal)&&o.close()}else o.close()}}function s(o,t,l,i,a,n,s,r,d){return function(r){function c(e){return g.then(function(o){D||u(o,e)})}function u(a,n){if(D=e.element(a),0===D.length)throw new Error("The template contains no elements; you need to wrap text nodes");if(o.enter(D,h),h.addClass(d.classes.hasModalState),f=l.$new(),n)for(var s in n)f[s]=n[s];var r=i(p,{$scope:f});C&&(f[C]=r),t(D)(f)}function m(){var e=a.defer();return D?o.leave(D).then(function(){f.$destroy(),h.removeClass(d.classes.hasModalState),D=null,e.resolve()}):e.resolve(),e.promise}function v(){return!!D}if(!(!r.template^!r.templateUrl))throw new Error("Expected modal to have exacly one of either `template` or `templateUrl`");var g,f,p=(r.template,r.controller||e.noop),C=r.controllerAs,h=e.element(r.container||document.querySelector(d.containerSelector)),D=null;if(r.template){var M=a.defer();M.resolve(r.template),g=M.promise}else g=n.get(r.templateUrl,{cache:s}).then(function(e){return e.data});return{activate:c,deactivate:m,isActive:v}}}e.module("vModal.config",[]).constant("modalConfig",{closeButtonText:"Close",containerSelector:"body",classes:{modal:"Modal Modal--default",modalWithBackdrop:"Modal--withBackdrop",dialog:"Dialog Dialog--default",dialogContent:"Dialog-content",dialogHeader:"Dialog-header",dialogFooter:"Dialog-footer",dialogBody:"Dialog-body",dialogClose:"Dialog-close",hasModalState:"has-modal",sizes:{medium:"Dialog--sizeMd",large:"Dialog--sizeLg",small:"Dialog--sizeSm"},positions:{center:"Dialog--positionCenter",middle:"Dialog--positionMiddle","top-left":"Dialog--positionTopLeft","top-right":"Dialog--positionTopRight","bottom-left":"Dialog--positionBottomLeft","bottom-right":"Dialog--positionBottomRight"}}}),e.module("vModal.directives",[]),e.module("vModal.services",[]),e.module("vModal",["ngAnimate","vModal.config","vModal.directives","vModal.services"]),e.module("vModal.directives").directive("vDialogBody",o),o.$inject=["modalConfig"],e.module("vModal.directives").directive("vDialogFooter",t),t.$inject=["modalConfig"],e.module("vModal.directives").directive("vDialogHeader",l),l.$inject=["modalConfig"],e.module("vModal.directives").directive("vDialog",i),i.$inject=["modalConfig"],e.module("vModal.directives").directive("vModal",a),a.$inject=["modalConfig"],n.$inject=["$scope","modalConfig"],e.module("vModal.services").factory("vModal",s),s.$inject=["$animate","$compile","$rootScope","$controller","$q","$http","$templateCache","$document","modalConfig"]}(angular);